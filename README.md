# Manga Creator

マンガページレイアウトを作成するためのデスクトップアプリケーションです。PyQt6を使用して構築されており、直感的なUIでマンガのコマ割り、吹き出し、テキストの配置が行えます。

## 機能

### ページ管理
- 複数ページの作成・削除・複製
- ページサイズのカスタマイズ（デフォルト: 1600x2560px）
- サムネイル付きページリスト

### コマ割り
- 分割線を描画してコマを自動生成
- 水平・垂直方向へのスナップ機能
- コマ間の余白（ガター）調整
- 8種類のレイアウトテンプレート
  - 4コマ縦割り
  - 2x2グリッド
  - 2x3グリッド
  - 3x2グリッド
  - 大1コマ+小2コマ
  - 上大+下2コマ
  - 3段構成
  - 2段構成

### 吹き出し
- 4種類の吹き出しタイプ
  - 楕円（通常のセリフ）
  - 角丸四角形
  - 雲形（思考・回想）
  - 爆発形（叫び・効果音）
- サイズ変更・移動
- しっぽの位置調整
- テキスト編集（ダブルクリック）

### テキスト
- 自由配置テキスト
- フォント・サイズ・色の変更

### 画像
- コマへの画像配置（ダブルクリックで読み込み）
- 画像の拡大縮小（マウスホイールまたはプロパティパネル）
- 画像の位置調整（ドラッグでトリミング位置変更）
- 右クリックメニューで画像の変更・クリア・リセット

### エクスポート
- PNG形式（300 DPI）
- JPEG形式（品質調整可能）
- PDF形式（複数ページ対応）

### 操作
- ズーム（Ctrl + マウスホイール、0.2x〜5.0x）
- 画面にフィット表示
- 選択ツール / コマツール / 吹き出しツール / テキストツール

## インストール

### 必要条件
- Python 3.10以上

### セットアップ

```bash
# リポジトリをクローン
git clone <repository-url>
cd manga_creator

# 仮想環境を作成（推奨）
python -m venv venv
source venv/bin/activate  # Linux/macOS
# または
venv\Scripts\activate  # Windows

# 依存パッケージをインストール
pip install -r requirements.txt
```

## 使い方

### 起動

```bash
python main.py
```

### 基本操作

1. **コマ割りの作成**
   - 左パネルから「コマ」ツールを選択
   - キャンバス上でドラッグして分割線を描画
   - 分割線が交差する部分で自動的にコマが生成されます

2. **テンプレートの使用**
   - 左パネルのテンプレートボタンをクリック
   - 選択したレイアウトが自動的に適用されます

3. **吹き出しの追加**
   - 「吹き出し」ツールを選択
   - 吹き出しタイプを選択（楕円/角丸/雲/爆発）
   - キャンバス上でドラッグして配置
   - ダブルクリックでテキストを編集

4. **テキストの追加**
   - 「テキスト」ツールを選択
   - キャンバス上でクリックして配置
   - 右パネルでフォント・サイズ・色を調整

5. **画像の配置と編集**
   - コマをダブルクリックで画像を選択
   - マウスホイールで拡大縮小（1.0x〜4.0x）
   - ドラッグで画像の位置を調整（トリミング）
   - 右クリックで画像の変更・クリア・リセット
   - プロパティパネルでも拡大率を調整可能

6. **エクスポート**
   - メニュー「ファイル」→「エクスポート」
   - PNG / JPEG / PDF から形式を選択

### キーボードショートカット

| 操作 | ショートカット |
|------|---------------|
| ズームイン | Ctrl + マウスホイール上 |
| ズームアウト | Ctrl + マウスホイール下 |
| 削除 | Delete |
| コマ内画像の拡大 | マウスホイール上（コマ上で） |
| コマ内画像の縮小 | マウスホイール下（コマ上で） |
| コマ内画像の移動 | ドラッグ（コマ上で） |

## プロジェクト構成

```
manga_creator/
├── main.py                 # アプリケーションエントリーポイント
├── requirements.txt        # 依存パッケージ
├── README.md              # このファイル
└── src/
    ├── models/            # データモデル
    │   ├── project.py     # プロジェクト
    │   ├── page.py        # ページ
    │   ├── panel.py       # コマ
    │   ├── divider_line.py    # 分割線
    │   ├── speech_bubble.py   # 吹き出し
    │   └── text_element.py    # テキスト要素
    ├── views/             # UIコンポーネント
    │   ├── main_window.py     # メインウィンドウ
    │   ├── canvas_scene.py    # キャンバスシーン
    │   ├── canvas_view.py     # キャンバスビュー
    │   ├── page_list_widget.py # ページリスト
    │   └── panels/
    │       ├── tool_panel.py      # ツールパネル
    │       └── property_panel.py  # プロパティパネル
    ├── graphics/          # グラフィックスアイテム
    │   ├── panel_item.py          # コマアイテム
    │   ├── speech_bubble_item.py  # 吹き出しアイテム
    │   ├── text_item.py           # テキストアイテム
    │   ├── divider_line_item.py   # 分割線アイテム
    │   └── bubble_shapes.py       # 吹き出し形状
    ├── services/          # ビジネスロジック
    │   ├── panel_calculator.py    # コマ計算
    │   ├── export_service.py      # エクスポート
    │   └── template_service.py    # テンプレート
    └── utils/             # ユーティリティ
        ├── constants.py   # 定数
        └── enums.py       # 列挙型
```

## 依存パッケージ

| パッケージ | バージョン | 用途 |
|-----------|-----------|------|
| PyQt6 | >= 6.6.0 | GUIフレームワーク |
| reportlab | >= 4.0.0 | PDF生成 |
| Pillow | >= 10.0.0 | 画像処理 |

## 今後の予定

- [ ] プロジェクトの保存/読み込み機能
- [ ] 元に戻す/やり直し機能
- [ ] コピー/ペースト機能
- [ ] レイヤー管理
- [ ] ドラッグ&ドロップによる画像読み込み
- [ ] カスタムテンプレートの保存

## ライセンス

MIT License

## 作者

Manga Creator Team
